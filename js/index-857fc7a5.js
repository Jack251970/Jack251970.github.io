import{C as o}from"./index-4e029f66.js";import{n as r,M as c,a as l}from"./index-34b1b7d7.js";import"./vendor-7fe3a1dd.js";const n=""+new URL("../png/like-63b04684.png",import.meta.url).href;const u={name:"About",components:{Comment:o,Markdown:c},data(){return{about:"",isLiked:"notLiked",likeTimes:0,loading:!0}},created(){localStorage.getItem("isLiked")==="undefined"?(localStorage.setItem("isLiked","notLiked"),this.isLiked="notLiked"):this.isLiked=localStorage.getItem("isLiked"),this.getAboutFn()},mounted(){localStorage.getItem("configLeancloud")==="yes"&&this.queryLikeFn()},methods:{async getAboutFn(){const t=await this.$store.dispatch("github/getAboutAction").catch(a=>{throw this.$message({content:"Failed to fetch about page!",type:"error"}),new Error(a)}).finally(()=>{this.loading=!1}),e=(t==null?void 0:t.body)||"",s=await new l().parse(e).catch(a=>{throw this.$message({content:"Failed to parse markdown!",type:"error"}),new Error(a)});this.about=s==null?void 0:s.content,this.appendBusuanzi(s==null?void 0:s.content)},async queryLikeFn(){const t=await this.$store.dispatch("leancloud/queryLikeAction","getTimes").catch(e=>{throw this.$message({content:"Failed to fetch the number of likes!",type:"error"}),new Error(e)});t!=="undefined"&&(this.likeTimes=t)},async likeClick(){if(localStorage.getItem("configLeancloud")==="no"){this.$message({content:"Likes are invalid because the blogger has not set up LeanCloud yet...",type:"error"});return}if(this.isLiked==="isLiked"){this.$message({content:"You have already given the blogger a like! 😊",type:"warning"});return}this.likeTimes=await this.$store.dispatch("leancloud/queryLikeAction").catch(t=>{throw this.$message({content:"Failed to give the blogger a like...",type:"error"}),new Error(t)}),this.isLiked="isLiked",localStorage.setItem("isLiked","isLiked"),this.$message({content:"Thanks for your like! 😊",type:"success"})},appendBusuanzi(t){if(!t)return;if(t.includes("busuanzi")){const i=document.querySelector('script[src*="busuanzi"]');i&&i.remove();const s=document.createElement("script");s.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",document.body.appendChild(s)}}}};var d=function(){var e=this,i=e._self._c;return i("div",{staticClass:"about-wrap"},[i("div",{staticClass:"about"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"about-content"},[i("Markdown",{attrs:{content:e.about}})],1),i("div",{staticClass:"like"},[e._m(0),i("div",{staticClass:"info"},[i("h2",[e._v("If you like it, please give me a thumbs up! 👍")]),i("p",[e._v("If you think the blog is good, please give me a like! Thanks! ❤️")]),i("div",{staticClass:"like-btn",attrs:{"data-text":`Already liked by ${e.likeTimes} people! 😊`},on:{click:e.likeClick}},[i("SvgIcon",{attrs:{name:"like"}})],1)]),e._m(1)])]),i("Comment")],1)},m=[function(){var t=this,e=t._self._c;return e("figure",{staticClass:"like-img"},[e("img",{attrs:{src:n,alt:"like"}})])},function(){var t=this,e=t._self._c;return e("figure",{staticClass:"like-img"},[e("img",{attrs:{src:n,alt:"like"}})])}],h=r(u,d,m,!1,null,"7c813467",null,null);const _=h.exports;export{_ as default};
