import{d as o}from"./vendor-7fe3a1dd.js";import{C as r}from"./index-4e029f66.js";import{c as a,M as l,g as c,n as d}from"./index-34b1b7d7.js";const h=a.friendsRepo===""||a.friendsRepo===void 0,g={name:"Friend",components:{Comment:r,Markdown:l},data(){return{filterFriends:[],loseContact:[],notAdded:[],loading:!0}},computed:{friendInfo(){return`\`\`\`js
name: ${this.$config.name}
url: ${this.$config.url}
avatar: ${this.$config.avatar}
desc: ${this.$config.desc}
\`\`\``},friendLink(){let n="https://github.com/";return n+=`${this.$config.username}/${this.$config.friendsRepo}/issues`,n},showLoseContact(){return this.loseContact.length>0},showNotAdded(){return this.notAdded.length>0}},created(){this.getFriendsFn()},methods:{...o({getFriendsCountAction:"github/getFriendsCountAction",getFriendsAction:"github/getFriendsAction",getBlogFriendsAction:"github/getBlogFriendsAction"}),parseFriends(n){n.forEach(t=>{const s=t.labels.map(i=>i.name);s.includes("Not added")?this.notAdded.push(t):s.includes("Out of contact")?this.loseContact.push(t):this.filterFriends.push(t)})},parseBlogFriends(n){n.forEach(t=>{const e=t.tag;e.name==="Not added"?this.notAdded.push(t):e.name==="Out of contact"?this.loseContact.push(t):this.filterFriends.push(t)})},async getFriendsCountFn(){return await this.getFriendsCountAction().catch(n=>{throw this.$message({content:"Failed to fetch friendship link number!",type:"error"}),new Error(n)})},async getFriendsFn(){if(h){const{url:n,pageSize:t}=await c().catch(s=>{throw this.$message({content:"Failed to fetch friendship link!",type:"error"}),new Error(s)}),e=await this.getBlogFriendsAction({url:n,page:1,pageSize:t}).catch(s=>{throw this.$message({content:"Failed to fetch friendship link!",type:"error"}),new Error(s)}).finally(()=>{this.loading=!1});this.parseBlogFriends(e)}else{const n=await this.getFriendsCountFn().catch(e=>{throw this.$message({content:"Failed to fetch friendship link number!",type:"error"}),new Error(e)}),t=await this.getFriendsAction({page:1,pageSize:n}).catch(e=>{throw this.$message({content:"Failed to fetch friendship link!",type:"error"}),new Error(e)}).finally(()=>{this.loading=!1});this.parseFriends(t)}}}};var f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"friend-wrap"},[e("div",{staticClass:"friend"},[e("section",[e("h2",[e("SvgIcon",{attrs:{name:"lianjie"}}),t._v(" My friendship link")],1),e("div",{staticClass:"info-wrap"},[e("p",[t._v("Welcome everyone to exchange friendly links! (づ￣ 3￣)づ")]),e("p",[t._v("Here is my friendship link. You can leave a message in this format at the bottom of the page, or visit "),e("a",{attrs:{href:t.friendLink}},[t._v("Friend")]),t._v(" to create it yourself!")]),e("Markdown",{attrs:{content:t.friendInfo,"need-parsed":!0}})],1)]),e("section",[e("h2",[e("SvgIcon",{attrs:{name:"zhinan"}}),t._v(" My friends")],1),e("p",[t._v("※ The following friendship links are listed in random order. The blogger will periodically update the ranking and filter out inactive links.")]),e("p",[t._v("※ For better experience of the blog page, your avatars will be stored in the blogger's own storage space. If there are any updates, please contact the blogger for modification.")]),e("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},t._l(t.filterFriends,function(s){return e("li",{key:s.number},[e("a",{staticClass:"info",attrs:{href:s.url,rel:"noopener noreferrer",target:"_blank"}},[e("figure",{staticClass:"avatar"},[e("img",{attrs:{src:s.avatar,alt:"avatar",loading:"lazy"}})]),e("div",{staticClass:"text"},[e("h3",{staticClass:"name"},[t._v(t._s(s.name))]),e("p",{staticClass:"desc"},[t._v(t._s(s.desc))])])])])}),0)]),t.showLoseContact?e("section",[e("p",{staticClass:"strong"},[t._v(" Friends who are out of contact ")]),e("ul",{staticClass:"content"},t._l(t.loseContact,function(s){return e("li",{key:s.number},[e("a",{staticClass:"info",attrs:{href:s.url,rel:"noopener noreferrer",target:"_blank"}},[e("figure",{staticClass:"avatar"},[e("img",{attrs:{src:s.avatar,alt:"avatar",loading:"lazy"}})]),e("div",{staticClass:"text"},[e("h3",{staticClass:"name"},[t._v(t._s(s.name))]),e("p",{staticClass:"desc"},[t._v(t._s(s.desc))])])])])}),0),e("p",[t._v("Please ask the friends who are out of contact to restore normal access to their websites as soon as possible and inform the blogger.")])]):t._e(),t.showNotAdded?e("section",[e("p",{staticClass:"strong"},[t._v(" Friends who are not added ")]),e("ul",{staticClass:"not-added"},t._l(t.notAdded,function(s){return e("li",{key:s.number},[e("h3",{staticClass:"name"},[t._v(" "+t._s(s.name)+" ")])])}),0),e("p",[t._v("If you would like this blog to continue listing your site, please add our site to yours and contact the blogger.")])]):t._e()]),e("Comment")],1)},u=[],p=d(g,f,u,!1,null,"9c436f6a",null,null);const F=p.exports;export{F as default};
